# RentHouse 프로젝트 진행 보고서 - 1단계 완료 및 추가 사항

## 1. 완료된 내용 (Completed Work)

### 핵심 기능 구현
*   **로그인 및 기본 인증**: 폼 기반 로그인 기능 및 기본 인증 상태 관리 구현. 
*  추가사항

	* Join 기능 추가
		* 이메일
		* 이름
		* 암호 (암호화)
	* settings 도 없음.
		* profile
			* 개인정보 수정
			* 암호 변경
			* 회원 탈퇴
		* login/logout

*   **자산 관리 (Property, Unit)**: `Property` 및 `Unit`에 대한 CRUD(생성, 조회, 수정, 삭제) 기능 및 목록/상세 화면 구현.
*  추가사항
	* 자산 데이터 변경
		* 자산 유형 : (dropdownlist)
			* 다가구 (빌라), 아파트, 오피스,주택, 상가, 토지
		* 우편번호 검색 api 를 통한 주소 입력
			* address = zip, add1, add2
		* 층수 필요 없음.
			* 소유자 정보 필요 (추후 고객관리 로 )
				* 이메일
				* 이름
		* 계약종류
			* 전세, 월세, 반전세
		* 
	* unit 데이터 변경
		* 임대 상태 (dropdownlist)
			* 임대 중 / 공실
		
*   **임차인 관리 (Tenant)**: 임차인 정보에 대한 CRUD 기능 및 목록/상세 화면 구현.
*  추가사항
	* 주민등록 번호 입력 시
		* 750331 - 1****** 처럼 주민번호는 생년월일 과 뒷자리 첫번째 1개만 저장
		* 주민등록번호 = bday + personalNo
	
*   **임대 계약 관리 (Lease)**: 임대 계약 정보에 대한 CRUD 기능 및 목록/상세 화면 구현, 상태 관리(`LeaseStatus` enum) 포함.
	*  추가사항
	* 등록 화면에서
		* 선택 가능 임차인 리스트 = 이미 계약 중인 임차인은 선택 불가 (리스트에서 제외 )
			* 그리고 리스트에 임차인이 없다면, 추가할 수 있도록 "임차인 등록" 버튼도 넣어줘.
		* 자산 선택 우선으로 하고
			* 선택 이후에 관련된 unit 들이 보여졌으면 한다.
			* unit 없는 경우엔 따로 선택 리스트가 보여지지 않았으면 한다.
		* 
*   **청구 관리 (Billing)**: 청구서(`Billing`) 및 청구 항목 템플릿(`BillTemplate`)에 대한 CRUD 기능 및 목록/폼 화면 구현.
    *  추가사항
	*   **개선 사항**: 날짜 선택기 추가, 임대 및 청구 항목 선택 표시 개선, 검색/필터 기능, 청구서 삭제 기능 추가.
    
	* 청구항목 (계약 별)
	    * 주차비, 관리비 (청소+공동전기), 물세
	* 

### UI/UX 및 아키텍처
*   **디자인 시스템**: Flutter Material 3 (M3) 기반의 커스텀 테마 적용.
*   **적응형 레이아웃**: 대시보드 화면에 데스크톱/모바일 반응형 레이아웃 적용.
*   **내비게이션**: `go_router`를 활용한 전역 라우팅 시스템 및 `NavigationRail`/`Drawer` 기반의 내비게이션 구현.
	* 추가사항
	* 모바일 환경, 세로 환경, 넓이가 좁은 환경에서는 네비게이션 바가 하단에 위치해야 함.
	
*   **상태 관리**: `Riverpod`, `Freezed`, `json_serializable`을 활용한 상태 관리 및 데이터 모델 구현.
*   **데이터 영속성**: 로컬 데이터 저장을 위해 `drift` (SQLite) 기반의 데이터베이스 연동.
*   **대시보드**: 핵심 지표 카드 및 빠른 작업 버튼 구현 (관련 화면으로 링크 연결 완료).
*   **유닛 상세 화면**: `unitDetailProvider` 추가, 라우트 추가, `unit_detail_screen.dart` 구현 및 내비게이션 연결 완료.

## 2. 남은 작업 요약 (Summary of Remaining Work)

### 높은 우선순위 (High Priority - 핵심 기능 / 누락된 주요 기능)
1.  **백엔드 통합**: 현재 로컬 SQLite 기반 앱을 백엔드 API와 연동 (API 호출, JWT 인증/갱신, 서버 측 권한 재검증, 비동기 대량 작업 처리 등).
	1. 변경: sqlite 사용 확정. web 은 현재 플랫폼에서 다른 db 를 사용토록 변경할 예정 (phase_3)
2.  **스케줄링**: 월초 자동 청구 생성, 미납 점검 등 백엔드 기반의 자동화 기능.
	1. phase_3
3.  **보고서**: 월별 수익·임차인 현황 PDF 생성 및 다운로드 기능 (백엔드 서비스 연동 필요).
	1. phase_2
4.  **사용자 역할 (RBAC - 세분화된 UI/액세스 제어)**: 위젯 수준의 접근 제어(`can(...)` 헬퍼) 구현 및 역할 기반 UI 동적 변경.
	1. 고려할 사항
	2. 어플 설치자가 사용자이다.
		1. 자산 소유자 = 어플 사용자 인 경우
		2. 자산 소유자 = 어플 사용자의 고객인 경우
			1. 고객관리 화면 필요
			2. 고객에게 리포트 전달 (어떻게 하지?)
	
5.  **결제 기능 (수납)**: 청구서 수납 처리, 영수증 생성, 결제 내역 관리 기능.
	1. 오픈 뱅킹 api 를 사용하여 수납 확인
6.  **작업 주문 관리 (Work Order)**: 유지보수 요청 접수, 할당, 처리, 완료 기능.
7.  **설정 모듈**: 조직/역할/권한 관리, 주소 검색, 통화/세율/형식 설정 등.
	1.  settings
		* 통화 (원, 달러 등)
		* profile
			* 개인정보 수정
			* 암호 변경
			* 회원 탈퇴
		* login/logout

### 중간 우선순위 (Medium Priority - 개선 / 향상)
8.  **파일 업로드**: 자산/유닛/임대 계약 관련 파일(등기, 사진 등) 업로드 기능. (고민대상)
9.  **활동 로그**: 대시보드에 최근 활동 로그 표시.
10. **고급 목록 기능**: `PaginatedDataTable` 또는 가상 스크롤, 컬럼 정렬/숨김, 고정 헤더를 포함한 커스텀 테이블 구현. (뭔지 모르겠음)
11. **검색/필터 URL 동기화**: 데스크톱 환경에서 검색/필터 쿼리 상태를 URL과 동기화.
12. **주소/지도 검색**: 다음 우편번호 검색 기능 연동. 추천
13. **접근성**: 터치 타겟, 스크린 리더 라벨, 키보드 내비게이션 등 전반적인 접근성 향상.
14. **로깅/크래시 보고**: `logger` 및 `sentry_flutter`를 활용한 로깅 및 크래시 보고 시스템 통합.
15. **테스트**: 단위, 위젯, 골든, 통합 테스트 코드 작성.

### 낮은 우선순위 (Low Priority - 플레이스홀더 / 향후 고려 사항)
16. **SNS OAuth**: 로그인 시 SNS OAuth 연동 (현재 플레이스홀더).
17. **스켈레톤 로딩**: 로딩 상태 시 스켈레톤 UI 표시.
18. **다크 모드**: 전체 앱에 대한 다크 모드 구현 및 테스트.
19. **오프라인 동기화 전략**: 로컬 영속성을 넘어선 오프라인 데이터 동기화 전략 구현.
